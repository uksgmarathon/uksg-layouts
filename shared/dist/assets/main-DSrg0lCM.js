import{P as it,c as st,a as ce,b as L,p as fe,n as dt,d as ee,e as ue,f as qe,s as ve,l as ct,g as ft,h as je,i as vt,j as mt,k as ht,Q as gt,m as pt}from"./QIcon-vfoJN3Em.js";import{c as b,R as yt,l as P,w as xe,k as _,T as Mt,S as Dt,m as wt,d as _t,u as St,a as bt,b as Ct,o as kt,e as Yt,G as He,t as qt,A as xt,B as Ht,f as Ot,g as At}from"./replicants-B4ZWdASP.js";import{v as Et,Q as $e}from"./QBtn-CERyKTiA.js";import{u as It,a as Tt,b as jt,c as $t,d as Ft}from"./private.use-form-D3lcR7Cz.js";import{m as Bt}from"./util-BuFe6IaP.js";const Me={left:!0,right:!0,up:!0,down:!0,horizontal:!0,vertical:!0},Vt=Object.keys(Me);Me.all=!0;function Oe(e){const u={};for(const a of Vt)e[a]===!0&&(u[a]=!0);return Object.keys(u).length===0?Me:(u.horizontal===!0?u.left=u.right=!0:u.left===!0&&u.right===!0&&(u.horizontal=!0),u.vertical===!0?u.up=u.down=!0:u.up===!0&&u.down===!0&&(u.vertical=!0),u.horizontal===!0&&u.vertical===!0&&(u.all=!0),u)}const Nt=["INPUT","TEXTAREA"];function Ae(e,u){return u.event===void 0&&e.target!==void 0&&e.target.draggable!==!0&&typeof u.handler=="function"&&Nt.includes(e.target.nodeName.toUpperCase())===!1&&(e.qClonedBy===void 0||e.qClonedBy.indexOf(u.uid)===-1)}function Lt(){if(window.getSelection!==void 0){const e=window.getSelection();e.empty!==void 0?e.empty():e.removeAllRanges!==void 0&&(e.removeAllRanges(),it.is.mobile!==!0&&e.addRange(document.createRange()))}else document.selection!==void 0&&document.selection.empty()}function me(e,u,a){const o=ue(e);let t,n=o.left-u.event.x,d=o.top-u.event.y,i=Math.abs(n),s=Math.abs(d);const f=u.direction;f.horizontal===!0&&f.vertical!==!0?t=n<0?"left":"right":f.horizontal!==!0&&f.vertical===!0?t=d<0?"up":"down":f.up===!0&&d<0?(t="up",i>s&&(f.left===!0&&n<0?t="left":f.right===!0&&n>0&&(t="right"))):f.down===!0&&d>0?(t="down",i>s&&(f.left===!0&&n<0?t="left":f.right===!0&&n>0&&(t="right"))):f.left===!0&&n<0?(t="left",i<s&&(f.up===!0&&d<0?t="up":f.down===!0&&d>0&&(t="down"))):f.right===!0&&n>0&&(t="right",i<s&&(f.up===!0&&d<0?t="up":f.down===!0&&d>0&&(t="down")));let c=!1;if(t===void 0&&a===!1){if(u.event.isFirst===!0||u.event.lastDir===void 0)return{};t=u.event.lastDir,c=!0,t==="left"||t==="right"?(o.left-=n,i=0,n=0):(o.top-=d,s=0,d=0)}return{synthetic:c,payload:{evt:e,touch:u.event.mouse!==!0,mouse:u.event.mouse===!0,position:o,direction:t,isFirst:u.event.isFirst,isFinal:a===!0,duration:Date.now()-u.event.time,distance:{x:i,y:s},offset:{x:n,y:d},delta:{x:o.left-u.event.lastX,y:o.top-u.event.lastY}}}}let Pt=0;const Zt=st({name:"touch-pan",beforeMount(e,{value:u,modifiers:a}){if(a.mouse!==!0&&L.has.touch!==!0)return;function o(n,d){a.mouse===!0&&d===!0?ft(n):(a.stop===!0&&ve(n),a.prevent===!0&&qe(n))}const t={uid:"qvtp_"+Pt++,handler:u,modifiers:a,direction:Oe(a),noop:dt,mouseStart(n){Ae(n,t)&&ct(n)&&(ee(t,"temp",[[document,"mousemove","move","notPassiveCapture"],[document,"mouseup","end","passiveCapture"]]),t.start(n,!0))},touchStart(n){if(Ae(n,t)){const d=n.target;ee(t,"temp",[[d,"touchmove","move","notPassiveCapture"],[d,"touchcancel","end","passiveCapture"],[d,"touchend","end","passiveCapture"]]),t.start(n)}},start(n,d){if(L.is.firefox===!0&&fe(e,!0),t.lastEvt=n,d===!0||a.stop===!0){if(t.direction.all!==!0&&(d!==!0||t.modifiers.mouseAllDir!==!0&&t.modifiers.mousealldir!==!0)){const f=n.type.indexOf("mouse")!==-1?new MouseEvent(n.type,n):new TouchEvent(n.type,n);n.defaultPrevented===!0&&qe(f),n.cancelBubble===!0&&ve(f),Object.assign(f,{qKeyEvent:n.qKeyEvent,qClickOutside:n.qClickOutside,qAnchorHandled:n.qAnchorHandled,qClonedBy:n.qClonedBy===void 0?[t.uid]:n.qClonedBy.concat(t.uid)}),t.initialEvent={target:n.target,event:f}}ve(n)}const{left:i,top:s}=ue(n);t.event={x:i,y:s,time:Date.now(),mouse:d===!0,detected:!1,isFirst:!0,isFinal:!1,lastX:i,lastY:s}},move(n){if(t.event===void 0)return;const d=ue(n),i=d.left-t.event.x,s=d.top-t.event.y;if(i===0&&s===0)return;t.lastEvt=n;const f=t.event.mouse===!0,c=()=>{o(n,f);let D;a.preserveCursor!==!0&&a.preservecursor!==!0&&(D=document.documentElement.style.cursor||"",document.documentElement.style.cursor="grabbing"),f===!0&&document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),Lt(),t.styleCleanup=k=>{if(t.styleCleanup=void 0,D!==void 0&&(document.documentElement.style.cursor=D),document.body.classList.remove("non-selectable"),f===!0){const T=()=>{document.body.classList.remove("no-pointer-events--children")};k!==void 0?setTimeout(()=>{T(),k()},50):T()}else k!==void 0&&k()}};if(t.event.detected===!0){t.event.isFirst!==!0&&o(n,t.event.mouse);const{payload:D,synthetic:k}=me(n,t,!1);D!==void 0&&(t.handler(D)===!1?t.end(n):(t.styleCleanup===void 0&&t.event.isFirst===!0&&c(),t.event.lastX=D.position.left,t.event.lastY=D.position.top,t.event.lastDir=k===!0?void 0:D.direction,t.event.isFirst=!1));return}if(t.direction.all===!0||f===!0&&(t.modifiers.mouseAllDir===!0||t.modifiers.mousealldir===!0)){c(),t.event.detected=!0,t.move(n);return}const h=Math.abs(i),C=Math.abs(s);h!==C&&(t.direction.horizontal===!0&&h>C||t.direction.vertical===!0&&h<C||t.direction.up===!0&&h<C&&s<0||t.direction.down===!0&&h<C&&s>0||t.direction.left===!0&&h>C&&i<0||t.direction.right===!0&&h>C&&i>0?(t.event.detected=!0,t.move(n)):t.end(n,!0))},end(n,d){var i;if(t.event!==void 0){if(ce(t,"temp"),L.is.firefox===!0&&fe(e,!1),d===!0)(i=t.styleCleanup)==null||i.call(t),t.event.detected!==!0&&t.initialEvent!==void 0&&t.initialEvent.target.dispatchEvent(t.initialEvent.event);else if(t.event.detected===!0){t.event.isFirst===!0&&t.handler(me(n===void 0?t.lastEvt:n,t).payload);const{payload:s}=me(n===void 0?t.lastEvt:n,t,!0),f=()=>{t.handler(s)};t.styleCleanup!==void 0?t.styleCleanup(f):f()}t.event=void 0,t.initialEvent=void 0,t.lastEvt=void 0}}};if(e.__qtouchpan=t,a.mouse===!0){const n=a.mouseCapture===!0||a.mousecapture===!0?"Capture":"";ee(t,"main",[[e,"mousedown","mouseStart",`passive${n}`]])}L.has.touch===!0&&ee(t,"main",[[e,"touchstart","touchStart",`passive${a.capture===!0?"Capture":""}`],[e,"touchmove","noop","notPassiveCapture"]])},updated(e,u){const a=e.__qtouchpan;a!==void 0&&(u.oldValue!==u.value&&(typeof value!="function"&&a.end(),a.handler=u.value),a.direction=Oe(u.modifiers))},beforeUnmount(e){var a;const u=e.__qtouchpan;u!==void 0&&(u.event!==void 0&&u.end(),ce(u,"main"),ce(u,"temp"),L.is.firefox===!0&&fe(e,!1),(a=u.styleCleanup)==null||a.call(u),delete e.__qtouchpan)}}),I=[-61,9,38,199,426,686,756,818,1111,1181,1210,1635,2060,2097,2192,2262,2324,2394,2456,3178];function zt(e,u,a){return Object.prototype.toString.call(e)==="[object Date]"&&(a=e.getDate(),u=e.getMonth()+1,e=e.getFullYear()),Rt(Fe(e,u,a))}function Xt(e){return Kt(e)===0}function Qt(e,u){return u<=6?31:u<=11||Xt(e)?30:29}function Kt(e){const u=I.length;let a=I[0],o,t,n,d,i;if(e<a||e>=I[u-1])throw new Error("Invalid Jalaali year "+e);for(i=1;i<u&&(o=I[i],t=o-a,!(e<o));i+=1)a=o;return d=e-a,t-d<6&&(d=d-t+w(t+4,33)*33),n=x(x(d+1,33)-1,4),n===-1&&(n=4),n}function Ut(e,u){const a=I.length,o=e+621;let t=-14,n=I[0],d,i,s,f,c;if(e<n||e>=I[a-1])throw new Error("Invalid Jalaali year "+e);for(c=1;c<a&&(d=I[c],i=d-n,!(e<d));c+=1)t=t+w(i,33)*8+w(x(i,33),4),n=d;f=e-n,t=t+w(f,33)*8+w(x(f,33)+3,4),x(i,33)===4&&i-f===4&&(t+=1);const h=w(o,4)-w((w(o,100)+1)*3,4)-150,C=20+t-h;return i-f<6&&(f=f-i+w(i+4,33)*33),s=x(x(f+1,33)-1,4),s===-1&&(s=4),{leap:s,gy:o,march:C}}function Rt(e){const u=Jt(e).gy;let a=u-621,o,t,n;const d=Ut(a),i=Fe(u,3,d.march);if(n=e-i,n>=0){if(n<=185)return t=1+w(n,31),o=x(n,31)+1,{jy:a,jm:t,jd:o};n-=186}else a-=1,n+=179,d.leap===1&&(n+=1);return t=7+w(n,30),o=x(n,30)+1,{jy:a,jm:t,jd:o}}function Fe(e,u,a){let o=w((e+w(u-8,6)+100100)*1461,4)+w(153*x(u+9,12)+2,5)+a-34840408;return o=o-w(w(e+100100+w(u-8,6),100)*3,4)+752,o}function Jt(e){let u=4*e+139361631;u=u+w(w(4*e+183187720,146097)*3,4)*4-3908;const a=w(x(u,1461),4)*5+308,o=w(x(a,153),5)+1,t=x(w(a,153),12)+1;return{gy:w(u,1461)-100100+w(8-t,6),gm:t,gd:o}}function w(e,u){return~~(e/u)}function x(e,u){return e-~~(e/u)*u}function M(e,u=2,a="0"){if(e==null)return e;const o=""+e;return o.length>=u?o:new Array(u-o.length+1).join(a)+o}const Wt=["gregorian","persian"],Ee={mask:{type:String},locale:Object,calendar:{type:String,validator:e=>Wt.includes(e),default:"gregorian"},landscape:Boolean,color:String,textColor:String,square:Boolean,flat:Boolean,bordered:Boolean,readonly:Boolean,disable:Boolean},Gt=["update:modelValue"];function en(e){return e.year+"/"+M(e.month)+"/"+M(e.day)}function tn(e,u){const a=b(()=>e.disable!==!0&&e.readonly!==!0),o=b(()=>a.value===!0?0:-1),t=b(()=>{const i=[];return e.color!==void 0&&i.push(`bg-${e.color}`),e.textColor!==void 0&&i.push(`text-${e.textColor}`),i.join(" ")});function n(){return e.locale!==void 0?{...u.lang.date,...e.locale}:u.lang.date}function d(i){const s=new Date,f=i===!0?null:0;if(e.calendar==="persian"){const c=zt(s);return{year:c.jy,month:c.jm,day:c.jd}}return{year:s.getFullYear(),month:s.getMonth()+1,day:s.getDate(),hour:f,minute:f,second:f,millisecond:f}}return{editable:a,tabindex:o,headerClass:t,getLocale:n,getCurrentDate:d}}const Be=864e5,nn=36e5,ye=6e4,Ve="YYYY-MM-DDTHH:mm:ss.SSSZ",un=/\[((?:[^\]\\]|\\]|\\)*)\]|do|d{1,4}|Mo|M{1,4}|m{1,2}|wo|w{1,2}|Qo|Do|DDDo|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]/g,rn=/(\[[^\]]*\])|do|d{1,4}|Mo|M{1,4}|m{1,2}|wo|w{1,2}|Qo|Do|DDDo|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]|([.*+:?^,\s${}()|\\]+)/g,he={};function an(e,u){const a="("+u.days.join("|")+")",o=e+a;if(he[o]!==void 0)return he[o];const t="("+u.daysShort.join("|")+")",n="("+u.months.join("|")+")",d="("+u.monthsShort.join("|")+")",i={};let s=0;const f=e.replace(rn,h=>{switch(s++,h){case"YY":return i.YY=s,"(-?\\d{1,2})";case"YYYY":return i.YYYY=s,"(-?\\d{1,4})";case"M":return i.M=s,"(\\d{1,2})";case"Mo":return i.M=s++,"(\\d{1,2}(st|nd|rd|th))";case"MM":return i.M=s,"(\\d{2})";case"MMM":return i.MMM=s,d;case"MMMM":return i.MMMM=s,n;case"D":return i.D=s,"(\\d{1,2})";case"Do":return i.D=s++,"(\\d{1,2}(st|nd|rd|th))";case"DD":return i.D=s,"(\\d{2})";case"H":return i.H=s,"(\\d{1,2})";case"HH":return i.H=s,"(\\d{2})";case"h":return i.h=s,"(\\d{1,2})";case"hh":return i.h=s,"(\\d{2})";case"m":return i.m=s,"(\\d{1,2})";case"mm":return i.m=s,"(\\d{2})";case"s":return i.s=s,"(\\d{1,2})";case"ss":return i.s=s,"(\\d{2})";case"S":return i.S=s,"(\\d{1})";case"SS":return i.S=s,"(\\d{2})";case"SSS":return i.S=s,"(\\d{3})";case"A":return i.A=s,"(AM|PM)";case"a":return i.a=s,"(am|pm)";case"aa":return i.aa=s,"(a\\.m\\.|p\\.m\\.)";case"ddd":return t;case"dddd":return a;case"Q":case"d":case"E":return"(\\d{1})";case"do":return s++,"(\\d{1}(st|nd|rd|th))";case"Qo":return"(1st|2nd|3rd|4th)";case"DDD":case"DDDD":return"(\\d{1,3})";case"DDDo":return s++,"(\\d{1,3}(st|nd|rd|th))";case"w":return"(\\d{1,2})";case"wo":return s++,"(\\d{1,2}(st|nd|rd|th))";case"ww":return"(\\d{2})";case"Z":return i.Z=s,"(Z|[+-]\\d{2}:\\d{2})";case"ZZ":return i.ZZ=s,"(Z|[+-]\\d{2}\\d{2})";case"X":return i.X=s,"(-?\\d+)";case"x":return i.x=s,"(-?\\d{4,})";default:return s--,h[0]==="["&&(h=h.substring(1,h.length-1)),h.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}}),c={map:i,regex:new RegExp("^"+f)};return he[o]=c,c}function Ne(e,u){return e!==void 0?e:u!==void 0?u.date:vt.date}function Ie(e,u=""){const a=e>0?"-":"+",o=Math.abs(e),t=Math.floor(o/60),n=o%60;return a+M(t)+u+M(n)}function te(e,u,a,o,t){const n={year:null,month:null,day:null,hour:null,minute:null,second:null,millisecond:null,timezoneOffset:null,dateHash:null,timeHash:null};if(t!==void 0&&Object.assign(n,t),e==null||e===""||typeof e!="string")return n;u===void 0&&(u=Ve);const d=Ne(a,je.props),i=d.months,s=d.monthsShort,{regex:f,map:c}=an(u,d),h=e.match(f);if(h===null)return n;let C="";if(c.X!==void 0||c.x!==void 0){const D=parseInt(h[c.X!==void 0?c.X:c.x],10);if(isNaN(D)===!0||D<0)return n;const k=new Date(D*(c.X!==void 0?1e3:1));n.year=k.getFullYear(),n.month=k.getMonth()+1,n.day=k.getDate(),n.hour=k.getHours(),n.minute=k.getMinutes(),n.second=k.getSeconds(),n.millisecond=k.getMilliseconds()}else{if(c.YYYY!==void 0)n.year=parseInt(h[c.YYYY],10);else if(c.YY!==void 0){const D=parseInt(h[c.YY],10);n.year=D<0?D:2e3+D}if(c.M!==void 0){if(n.month=parseInt(h[c.M],10),n.month<1||n.month>12)return n}else c.MMM!==void 0?n.month=s.indexOf(h[c.MMM])+1:c.MMMM!==void 0&&(n.month=i.indexOf(h[c.MMMM])+1);if(c.D!==void 0){if(n.day=parseInt(h[c.D],10),n.year===null||n.month===null||n.day<1)return n;const D=o!=="persian"?new Date(n.year,n.month,0).getDate():Qt(n.year,n.month);if(n.day>D)return n}c.H!==void 0?n.hour=parseInt(h[c.H],10)%24:c.h!==void 0&&(n.hour=parseInt(h[c.h],10)%12,(c.A&&h[c.A]==="PM"||c.a&&h[c.a]==="pm"||c.aa&&h[c.aa]==="p.m.")&&(n.hour+=12),n.hour=n.hour%24),c.m!==void 0&&(n.minute=parseInt(h[c.m],10)%60),c.s!==void 0&&(n.second=parseInt(h[c.s],10)%60),c.S!==void 0&&(n.millisecond=parseInt(h[c.S],10)*10**(3-h[c.S].length)),(c.Z!==void 0||c.ZZ!==void 0)&&(C=c.Z!==void 0?h[c.Z].replace(":",""):h[c.ZZ],n.timezoneOffset=(C[0]==="+"?-1:1)*(60*C.slice(1,3)+1*C.slice(3,5)))}return n.dateHash=M(n.year,6)+"/"+M(n.month)+"/"+M(n.day),n.timeHash=M(n.hour)+":"+M(n.minute)+":"+M(n.second)+C,n}function ge(e){const u=new Date(e.getFullYear(),e.getMonth(),e.getDate());u.setDate(u.getDate()-(u.getDay()+6)%7+3);const a=new Date(u.getFullYear(),0,4);a.setDate(a.getDate()-(a.getDay()+6)%7+3);const o=u.getTimezoneOffset()-a.getTimezoneOffset();u.setHours(u.getHours()-o);const t=(u-a)/(Be*7);return 1+Math.floor(t)}function E(e,u,a){const o=new Date(e),t=`set${a===!0?"UTC":""}`;switch(u){case"year":case"years":o[`${t}Month`](0);case"month":case"months":o[`${t}Date`](1);case"day":case"days":case"date":o[`${t}Hours`](0);case"hour":case"hours":o[`${t}Minutes`](0);case"minute":case"minutes":o[`${t}Seconds`](0);case"second":case"seconds":o[`${t}Milliseconds`](0)}return o}function ne(e,u,a){return(e.getTime()-e.getTimezoneOffset()*ye-(u.getTime()-u.getTimezoneOffset()*ye))/a}function on(e,u,a="days"){const o=new Date(e),t=new Date(u);switch(a){case"years":case"year":return o.getFullYear()-t.getFullYear();case"months":case"month":return(o.getFullYear()-t.getFullYear())*12+o.getMonth()-t.getMonth();case"days":case"day":case"date":return ne(E(o,"day"),E(t,"day"),Be);case"hours":case"hour":return ne(E(o,"hour"),E(t,"hour"),nn);case"minutes":case"minute":return ne(E(o,"minute"),E(t,"minute"),ye);case"seconds":case"second":return ne(E(o,"second"),E(t,"second"),1e3)}}function pe(e){return on(e,E(e,"year"),"days")+1}function $(e){if(e>=11&&e<=13)return`${e}th`;switch(e%10){case 1:return`${e}st`;case 2:return`${e}nd`;case 3:return`${e}rd`}return`${e}th`}const Te={YY(e,u,a){const o=this.YYYY(e,u,a)%100;return o>=0?M(o):"-"+M(Math.abs(o))},YYYY(e,u,a){return a??e.getFullYear()},M(e){return e.getMonth()+1},Mo(e){return $(e.getMonth()+1)},MM(e){return M(e.getMonth()+1)},MMM(e,u){return u.monthsShort[e.getMonth()]},MMMM(e,u){return u.months[e.getMonth()]},Q(e){return Math.ceil((e.getMonth()+1)/3)},Qo(e){return $(this.Q(e))},D(e){return e.getDate()},Do(e){return $(e.getDate())},DD(e){return M(e.getDate())},DDD(e){return pe(e)},DDDo(e){return $(pe(e))},DDDD(e){return M(pe(e),3)},d(e){return e.getDay()},do(e){return $(e.getDay())},dd(e,u){return u.days[e.getDay()].slice(0,2)},ddd(e,u){return u.daysShort[e.getDay()]},dddd(e,u){return u.days[e.getDay()]},E(e){return e.getDay()||7},w(e){return ge(e)},wo(e){return $(ge(e))},ww(e){return M(ge(e))},H(e){return e.getHours()},HH(e){return M(e.getHours())},h(e){const u=e.getHours();return u===0?12:u>12?u%12:u},hh(e){return M(this.h(e))},m(e){return e.getMinutes()},mm(e){return M(e.getMinutes())},s(e){return e.getSeconds()},ss(e){return M(e.getSeconds())},S(e){return Math.floor(e.getMilliseconds()/100)},SS(e){return M(Math.floor(e.getMilliseconds()/10))},SSS(e){return M(e.getMilliseconds(),3)},A(e){return e.getHours()<12?"AM":"PM"},a(e){return e.getHours()<12?"am":"pm"},aa(e){return e.getHours()<12?"a.m.":"p.m."},Z(e,u,a,o){const t=o??e.getTimezoneOffset();return Ie(t,":")},ZZ(e,u,a,o){const t=o??e.getTimezoneOffset();return Ie(t)},X(e){return Math.floor(e.getTime()/1e3)},x(e){return e.getTime()}};function ln(e,u,a,o,t){if(e!==0&&!e||e===1/0||e===-1/0)return;const n=new Date(e);if(isNaN(n))return;u===void 0&&(u=Ve);const d=Ne(a,je.props);return u.replace(un,(i,s)=>i in Te?Te[i](n,d,o,t):s===void 0?i:s.split("\\]").join("]"))}function sn(e,u){return e.hour!==null&&e.minute===null?"minute":"hour"}function dn(){const e=new Date;return{hour:e.getHours(),minute:e.getMinutes(),second:e.getSeconds(),millisecond:e.getMilliseconds()}}const cn=mt({name:"QTime",props:{...Tt,...It,...Ee,modelValue:{required:!0,validator:e=>typeof e=="string"||e===null},mask:{...Ee.mask,default:null},format24h:{type:Boolean,default:null},defaultDate:{type:String,validator:e=>/^-?[\d]+\/[0-1]\d\/[0-3]\d$/.test(e)},options:Function,hourOptions:Array,minuteOptions:Array,secondOptions:Array,withSeconds:Boolean,nowBtn:Boolean},emits:Gt,setup(e,{slots:u,emit:a}){const o=yt(),{$q:t}=o.proxy,n=jt(e,t),{tabindex:d,headerClass:i,getLocale:s,getCurrentDate:f}=tn(e,t),c=$t(e),h=Ft(c);let C,D;const k=P(null),T=b(()=>Qe()),Z=b(()=>s()),we=b(()=>Ke()),z=te(e.modelValue,T.value,Z.value,e.calendar,we.value),y=P(sn(z)),v=P(z),Y=P(z.hour===null||z.hour<12),Le=b(()=>`q-time q-time--${e.landscape===!0?"landscape":"portrait"}`+(n.value===!0?" q-time--dark q-dark":"")+(e.disable===!0?" disabled":e.readonly===!0?" q-time--readonly":"")+(e.bordered===!0?" q-time--bordered":"")+(e.square===!0?" q-time--square no-border-radius":"")+(e.flat===!0?" q-time--flat no-shadow":"")),re=b(()=>{const r=v.value;return{hour:r.hour===null?"--":H.value===!0?M(r.hour):String(Y.value===!0?r.hour===0?12:r.hour:r.hour>12?r.hour-12:r.hour),minute:r.minute===null?"--":M(r.minute),second:r.second===null?"--":M(r.second)}}),H=b(()=>e.format24h!==null?e.format24h:t.lang.date.format24h),Pe=b(()=>{const r=y.value==="hour",l=r===!0?12:60,m=v.value[y.value];let S=`rotate(${Math.round(m*(360/l))-180}deg) translateX(-50%)`;return r===!0&&H.value===!0&&v.value.hour>=12&&(S+=" scale(.7)"),{transform:S}}),_e=b(()=>v.value.hour!==null),Ze=b(()=>_e.value===!0&&v.value.minute!==null),F=b(()=>e.hourOptions!==void 0?r=>e.hourOptions.includes(r):e.options!==void 0?r=>e.options(r,null,null):null),X=b(()=>e.minuteOptions!==void 0?r=>e.minuteOptions.includes(r):e.options!==void 0?r=>e.options(v.value.hour,r,null):null),Q=b(()=>e.secondOptions!==void 0?r=>e.secondOptions.includes(r):e.options!==void 0?r=>e.options(v.value.hour,v.value.minute,r):null),A=b(()=>{if(F.value===null)return null;const r=U(0,11,F.value),l=U(12,11,F.value);return{am:r,pm:l,values:r.values.concat(l.values)}}),B=b(()=>X.value!==null?U(0,59,X.value):null),V=b(()=>Q.value!==null?U(0,59,Q.value):null),K=b(()=>{switch(y.value){case"hour":return A.value;case"minute":return B.value;case"second":return V.value}}),ze=b(()=>{let r,l,m=0,p=1;const S=K.value!==null?K.value.values:void 0;y.value==="hour"?H.value===!0?(r=0,l=23):(r=0,l=11,Y.value===!1&&(m=12)):(r=0,l=55,p=5);const O=[];for(let g=r,q=r;g<=l;g+=p,q++){const j=g+m,ot=(S==null?void 0:S.includes(j))===!1,lt=y.value==="hour"&&g===0?H.value===!0?"00":"12":g;O.push({val:j,index:q,disable:ot,label:lt})}return O}),Xe=b(()=>[[Zt,Ue,void 0,{stop:!0,prevent:!0,mouse:!0}]]);xe(()=>e.modelValue,r=>{const l=te(r,T.value,Z.value,e.calendar,we.value);(l.dateHash!==v.value.dateHash||l.timeHash!==v.value.timeHash)&&(v.value=l,l.hour===null?y.value="hour":Y.value=l.hour<12)}),xe([T,Z],()=>{wt(()=>{de()})});function Se(){const r={...f(),...dn()};de(r),Object.assign(v.value,r),y.value="hour"}function U(r,l,m){const p=Array.apply(null,{length:l+1}).map((S,O)=>{const g=O+r;return{index:g,val:m(g)===!0}}).filter(S=>S.val===!0).map(S=>S.index);return{min:p[0],max:p[p.length-1],values:p,threshold:l+1}}function be(r,l,m){const p=Math.abs(r-l);return Math.min(p,m-p)}function ae(r,{min:l,max:m,values:p,threshold:S}){if(r===l)return l;if(r<l||r>m)return be(r,l,S)<=be(r,m,S)?l:m;const O=p.findIndex(j=>r<=j),g=p[O-1],q=p[O];return r-g<=q-r?g:q}function Qe(){return e.calendar!=="persian"&&e.mask!==null?e.mask:`HH:mm${e.withSeconds===!0?":ss":""}`}function Ke(){if(typeof e.defaultDate!="string"){const r=f(!0);return r.dateHash=en(r),r}return te(e.defaultDate,"YYYY/MM/DD",void 0,e.calendar)}function oe(){return Et(o)===!0||K.value!==null&&(K.value.values.length===0||y.value==="hour"&&H.value!==!0&&A.value[Y.value===!0?"am":"pm"].values.length===0)}function le(){const r=k.value,{top:l,left:m,width:p}=r.getBoundingClientRect(),S=p/2;return{top:l+S,left:m+S,dist:S*.7}}function Ue(r){if(oe()!==!0){if(r.isFirst===!0){C=le(),D=R(r.evt,C);return}D=R(r.evt,C,D),r.isFinal===!0&&(C=!1,D=null,Ce())}}function Ce(){y.value==="hour"?y.value="minute":e.withSeconds&&y.value==="minute"&&(y.value="second")}function R(r,l,m){const p=ue(r),S=Math.abs(p.top-l.top),O=Math.sqrt(Math.pow(Math.abs(p.top-l.top),2)+Math.pow(Math.abs(p.left-l.left),2));let g,q=Math.asin(S/O)*(180/Math.PI);if(p.top<l.top?q=l.left<p.left?90-q:270+q:q=l.left<p.left?q+90:270-q,y.value==="hour"){if(g=q/30,A.value!==null){const j=H.value!==!0?Y.value===!0:A.value.am.values.length!==0&&A.value.pm.values.length!==0?O>=l.dist:A.value.am.values.length!==0;g=ae(g+(j===!0?0:12),A.value[j===!0?"am":"pm"])}else g=Math.round(g),H.value===!0?O<l.dist?g<12&&(g+=12):g===12&&(g=0):Y.value===!0&&g===12?g=0:Y.value===!1&&g!==12&&(g+=12);H.value===!0&&(Y.value=g<12)}else g=Math.round(q/6)%60,y.value==="minute"&&B.value!==null?g=ae(g,B.value):y.value==="second"&&V.value!==null&&(g=ae(g,V.value));return m!==g&&ut[y.value](g),g}const ie={hour(){y.value="hour"},minute(){y.value="minute"},second(){y.value="second"}};function Re(r){r.keyCode===13&&ke()}function Je(r){r.keyCode===13&&Ye()}function We(r){oe()!==!0&&(t.platform.is.desktop!==!0&&R(r,le()),Ce())}function Ge(r){oe()!==!0&&R(r,le())}function et(r){if(r.keyCode===13)y.value="hour";else if([37,39].includes(r.keyCode)){const l=r.keyCode===37?-1:1;if(A.value!==null){const m=H.value===!0?A.value.values:A.value[Y.value===!0?"am":"pm"].values;if(m.length===0)return;if(v.value.hour===null)J(m[0]);else{const p=(m.length+m.indexOf(v.value.hour)+l)%m.length;J(m[p])}}else{const m=H.value===!0?24:12,p=H.value!==!0&&Y.value===!1?12:0,S=v.value.hour===null?-l:v.value.hour;J(p+(24+S+l)%m)}}}function tt(r){if(r.keyCode===13)y.value="minute";else if([37,39].includes(r.keyCode)){const l=r.keyCode===37?-1:1;if(B.value!==null){const m=B.value.values;if(m.length===0)return;if(v.value.minute===null)W(m[0]);else{const p=(m.length+m.indexOf(v.value.minute)+l)%m.length;W(m[p])}}else{const m=v.value.minute===null?-l:v.value.minute;W((60+m+l)%60)}}}function nt(r){if(r.keyCode===13)y.value="second";else if([37,39].includes(r.keyCode)){const l=r.keyCode===37?-1:1;if(V.value!==null){const m=V.value.values;if(m.length===0)return;if(v.value.seconds===null)G(m[0]);else{const p=(m.length+m.indexOf(v.value.second)+l)%m.length;G(m[p])}}else{const m=v.value.second===null?-l:v.value.second;G((60+m+l)%60)}}}function J(r){v.value.hour!==r&&(v.value.hour=r,N())}function W(r){v.value.minute!==r&&(v.value.minute=r,N())}function G(r){v.value.second!==r&&(v.value.second=r,N())}const ut={hour:J,minute:W,second:G};function ke(){Y.value===!1&&(Y.value=!0,v.value.hour!==null&&(v.value.hour-=12,N()))}function Ye(){Y.value===!0&&(Y.value=!1,v.value.hour!==null&&(v.value.hour+=12,N()))}function se(r){const l=e.modelValue;y.value!==r&&l!==void 0&&l!==null&&l!==""&&typeof l!="string"&&(y.value=r)}function N(){if(F.value!==null&&F.value(v.value.hour)!==!0){v.value=te(),se("hour");return}if(X.value!==null&&X.value(v.value.minute)!==!0){v.value.minute=null,v.value.second=null,se("minute");return}if(e.withSeconds===!0&&Q.value!==null&&Q.value(v.value.second)!==!0){v.value.second=null,se("second");return}v.value.hour===null||v.value.minute===null||e.withSeconds===!0&&v.value.second===null||de()}function de(r){const l=Object.assign({...v.value},r),m=e.calendar==="persian"?M(l.hour)+":"+M(l.minute)+(e.withSeconds===!0?":"+M(l.second):""):ln(new Date(l.year,l.month===null?null:l.month-1,l.day,l.hour,l.minute,l.second,l.millisecond),T.value,Z.value,l.year,l.timezoneOffset);l.changed=m!==e.modelValue,a("update:modelValue",m,l)}function rt(){const r=[_("div",{class:"q-time__link "+(y.value==="hour"?"q-time__link--active":"cursor-pointer"),tabindex:d.value,onClick:ie.hour,onKeyup:et},re.value.hour),_("div",":"),_("div",_e.value===!0?{class:"q-time__link "+(y.value==="minute"?"q-time__link--active":"cursor-pointer"),tabindex:d.value,onKeyup:tt,onClick:ie.minute}:{class:"q-time__link"},re.value.minute)];e.withSeconds===!0&&r.push(_("div",":"),_("div",Ze.value===!0?{class:"q-time__link "+(y.value==="second"?"q-time__link--active":"cursor-pointer"),tabindex:d.value,onKeyup:nt,onClick:ie.second}:{class:"q-time__link"},re.value.second));const l=[_("div",{class:"q-time__header-label row items-center no-wrap",dir:"ltr"},r)];return H.value===!1&&l.push(_("div",{class:"q-time__header-ampm column items-between no-wrap"},[_("div",{class:"q-time__link "+(Y.value===!0?"q-time__link--active":"cursor-pointer"),tabindex:d.value,onClick:ke,onKeyup:Re},"AM"),_("div",{class:"q-time__link "+(Y.value!==!0?"q-time__link--active":"cursor-pointer"),tabindex:d.value,onClick:Ye,onKeyup:Je},"PM")])),_("div",{class:"q-time__header flex flex-center no-wrap "+i.value},l)}function at(){const r=v.value[y.value];return _("div",{class:"q-time__content col relative-position"},[_(Mt,{name:"q-transition--scale"},()=>_("div",{key:"clock"+y.value,class:"q-time__container-parent absolute-full"},[_("div",{ref:k,class:"q-time__container-child fit overflow-hidden"},[Dt(_("div",{class:"q-time__clock cursor-pointer non-selectable",onClick:We,onMousedown:Ge},[_("div",{class:"q-time__clock-circle fit"},[_("div",{class:"q-time__clock-pointer"+(v.value[y.value]===null?" hidden":e.color!==void 0?` text-${e.color}`:""),style:Pe.value}),ze.value.map(l=>_("div",{class:`q-time__clock-position row flex-center q-time__clock-pos-${l.index}`+(l.val===r?" q-time__clock-position--active "+i.value:l.disable===!0?" q-time__clock-position--disable":"")},[_("span",l.label)]))])]),Xe.value)])])),e.nowBtn===!0?_($e,{class:"q-time__now-button absolute",icon:t.iconSet.datetime.now,unelevated:!0,size:"sm",round:!0,color:e.color,textColor:e.textColor,tabindex:d.value,onClick:Se}):null])}return o.proxy.setNow=Se,()=>{const r=[at()],l=ht(u.default);return l!==void 0&&r.push(_("div",{class:"q-time__actions"},l)),e.name!==void 0&&e.disable!==!0&&h(r,"push"),_("div",{class:Le.value,tabindex:-1},[rt(),_("div",{class:"q-time__main col overflow-auto"},r)])}}}),fn=_t({__name:"main",setup(e){St({title:"Countdown Control"});const u=P(""),a=b(()=>{var n,d;const t=Math.round((((d=(n=bt)==null?void 0:n.data)==null?void 0:d.remaining)??0)/1e3);return Bt(t*1e3)});function o(){nodecg.sendMessage("countdownStart",u.value),u.value=""}return(t,n)=>(kt(),Ct("div",null,[Yt("div",null,"Current Countdown: "+qt(a.value),1),He(cn,{class:"full-width",modelValue:u.value,"onUpdate:modelValue":n[0]||(n[0]=d=>u.value=d),format24h:"",flat:"",square:""},null,8,["modelValue"]),He($e,{class:"full-width",onClick:o,color:"primary",unelevated:"",square:""},{default:xt(()=>n[1]||(n[1]=[Ht("Apply")])),_:1})]))}}),De=Ot(fn),vn=At();De.use(gt);De.use(vn);De.mount("#app");pt.set(!0);
