import{P as it,c as st,a as L,n as dt,l as ct,b as ee,p as ce,d as qe,s as fe,e as ue,f as me,g as ft,h as je,i as mt,j as ht,k as vt,Q as gt,m as pt}from"./QIcon-DZgoACOo.js";import{c as C,m as P,w as xe,l as _,Q as yt,T as Mt,R as Dt,k as wt,d as _t,u as Ct,a as St,b as bt,t as kt,E as He,x as Yt,e as qt,o as xt,A as Ht,f as Ot,g as At}from"./replicants-B02nfL1m.js";import{Q as $e,v as Et}from"./QBtn-Dv2fDPGi.js";import{u as It,a as Tt,b as jt,c as $t,d as Ft}from"./private.use-form-BvZ7pluI.js";import{m as Bt}from"./util-BuFe6IaP.js";const Me={left:!0,right:!0,up:!0,down:!0,horizontal:!0,vertical:!0},Vt=Object.keys(Me);Me.all=!0;function Oe(e){const u={};for(const l of Vt)e[l]===!0&&(u[l]=!0);return Object.keys(u).length===0?Me:(u.horizontal===!0?u.left=u.right=!0:u.left===!0&&u.right===!0&&(u.horizontal=!0),u.vertical===!0?u.up=u.down=!0:u.up===!0&&u.down===!0&&(u.vertical=!0),u.horizontal===!0&&u.vertical===!0&&(u.all=!0),u)}const Nt=["INPUT","TEXTAREA"];function Ae(e,u){return u.event===void 0&&e.target!==void 0&&e.target.draggable!==!0&&typeof u.handler=="function"&&Nt.includes(e.target.nodeName.toUpperCase())===!1&&(e.qClonedBy===void 0||e.qClonedBy.indexOf(u.uid)===-1)}function Lt(){if(window.getSelection!==void 0){const e=window.getSelection();e.empty!==void 0?e.empty():e.removeAllRanges!==void 0&&(e.removeAllRanges(),it.is.mobile!==!0&&e.addRange(document.createRange()))}else document.selection!==void 0&&document.selection.empty()}function he(e,u,l){const a=ue(e);let t,n=a.left-u.event.x,d=a.top-u.event.y,i=Math.abs(n),s=Math.abs(d);const f=u.direction;f.horizontal===!0&&f.vertical!==!0?t=n<0?"left":"right":f.horizontal!==!0&&f.vertical===!0?t=d<0?"up":"down":f.up===!0&&d<0?(t="up",i>s&&(f.left===!0&&n<0?t="left":f.right===!0&&n>0&&(t="right"))):f.down===!0&&d>0?(t="down",i>s&&(f.left===!0&&n<0?t="left":f.right===!0&&n>0&&(t="right"))):f.left===!0&&n<0?(t="left",i<s&&(f.up===!0&&d<0?t="up":f.down===!0&&d>0&&(t="down"))):f.right===!0&&n>0&&(t="right",i<s&&(f.up===!0&&d<0?t="up":f.down===!0&&d>0&&(t="down")));let c=!1;if(t===void 0&&l===!1){if(u.event.isFirst===!0||u.event.lastDir===void 0)return{};t=u.event.lastDir,c=!0,t==="left"||t==="right"?(a.left-=n,i=0,n=0):(a.top-=d,s=0,d=0)}return{synthetic:c,payload:{evt:e,touch:u.event.mouse!==!0,mouse:u.event.mouse===!0,position:a,direction:t,isFirst:u.event.isFirst,isFinal:l===!0,duration:Date.now()-u.event.time,distance:{x:i,y:s},offset:{x:n,y:d},delta:{x:a.left-u.event.lastX,y:a.top-u.event.lastY}}}}let Pt=0;const Zt=st({name:"touch-pan",beforeMount(e,{value:u,modifiers:l}){if(l.mouse!==!0&&L.has.touch!==!0)return;function a(n,d){l.mouse===!0&&d===!0?ft(n):(l.stop===!0&&fe(n),l.prevent===!0&&qe(n))}const t={uid:"qvtp_"+Pt++,handler:u,modifiers:l,direction:Oe(l),noop:dt,mouseStart(n){Ae(n,t)&&ct(n)&&(ee(t,"temp",[[document,"mousemove","move","notPassiveCapture"],[document,"mouseup","end","passiveCapture"]]),t.start(n,!0))},touchStart(n){if(Ae(n,t)){const d=n.target;ee(t,"temp",[[d,"touchmove","move","notPassiveCapture"],[d,"touchcancel","end","passiveCapture"],[d,"touchend","end","passiveCapture"]]),t.start(n)}},start(n,d){if(L.is.firefox===!0&&ce(e,!0),t.lastEvt=n,d===!0||l.stop===!0){if(t.direction.all!==!0&&(d!==!0||t.modifiers.mouseAllDir!==!0&&t.modifiers.mousealldir!==!0)){const f=n.type.indexOf("mouse")!==-1?new MouseEvent(n.type,n):new TouchEvent(n.type,n);n.defaultPrevented===!0&&qe(f),n.cancelBubble===!0&&fe(f),Object.assign(f,{qKeyEvent:n.qKeyEvent,qClickOutside:n.qClickOutside,qAnchorHandled:n.qAnchorHandled,qClonedBy:n.qClonedBy===void 0?[t.uid]:n.qClonedBy.concat(t.uid)}),t.initialEvent={target:n.target,event:f}}fe(n)}const{left:i,top:s}=ue(n);t.event={x:i,y:s,time:Date.now(),mouse:d===!0,detected:!1,isFirst:!0,isFinal:!1,lastX:i,lastY:s}},move(n){if(t.event===void 0)return;const d=ue(n),i=d.left-t.event.x,s=d.top-t.event.y;if(i===0&&s===0)return;t.lastEvt=n;const f=t.event.mouse===!0,c=()=>{a(n,f);let D;l.preserveCursor!==!0&&l.preservecursor!==!0&&(D=document.documentElement.style.cursor||"",document.documentElement.style.cursor="grabbing"),f===!0&&document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),Lt(),t.styleCleanup=k=>{if(t.styleCleanup=void 0,D!==void 0&&(document.documentElement.style.cursor=D),document.body.classList.remove("non-selectable"),f===!0){const T=()=>{document.body.classList.remove("no-pointer-events--children")};k!==void 0?setTimeout(()=>{T(),k()},50):T()}else k!==void 0&&k()}};if(t.event.detected===!0){t.event.isFirst!==!0&&a(n,t.event.mouse);const{payload:D,synthetic:k}=he(n,t,!1);D!==void 0&&(t.handler(D)===!1?t.end(n):(t.styleCleanup===void 0&&t.event.isFirst===!0&&c(),t.event.lastX=D.position.left,t.event.lastY=D.position.top,t.event.lastDir=k===!0?void 0:D.direction,t.event.isFirst=!1));return}if(t.direction.all===!0||f===!0&&(t.modifiers.mouseAllDir===!0||t.modifiers.mousealldir===!0)){c(),t.event.detected=!0,t.move(n);return}const v=Math.abs(i),b=Math.abs(s);v!==b&&(t.direction.horizontal===!0&&v>b||t.direction.vertical===!0&&v<b||t.direction.up===!0&&v<b&&s<0||t.direction.down===!0&&v<b&&s>0||t.direction.left===!0&&v>b&&i<0||t.direction.right===!0&&v>b&&i>0?(t.event.detected=!0,t.move(n)):t.end(n,!0))},end(n,d){if(t.event!==void 0){if(me(t,"temp"),L.is.firefox===!0&&ce(e,!1),d===!0)t.styleCleanup!==void 0&&t.styleCleanup(),t.event.detected!==!0&&t.initialEvent!==void 0&&t.initialEvent.target.dispatchEvent(t.initialEvent.event);else if(t.event.detected===!0){t.event.isFirst===!0&&t.handler(he(n===void 0?t.lastEvt:n,t).payload);const{payload:i}=he(n===void 0?t.lastEvt:n,t,!0),s=()=>{t.handler(i)};t.styleCleanup!==void 0?t.styleCleanup(s):s()}t.event=void 0,t.initialEvent=void 0,t.lastEvt=void 0}}};if(e.__qtouchpan=t,l.mouse===!0){const n=l.mouseCapture===!0||l.mousecapture===!0?"Capture":"";ee(t,"main",[[e,"mousedown","mouseStart",`passive${n}`]])}L.has.touch===!0&&ee(t,"main",[[e,"touchstart","touchStart",`passive${l.capture===!0?"Capture":""}`],[e,"touchmove","noop","notPassiveCapture"]])},updated(e,u){const l=e.__qtouchpan;l!==void 0&&(u.oldValue!==u.value&&(typeof value!="function"&&l.end(),l.handler=u.value),l.direction=Oe(u.modifiers))},beforeUnmount(e){const u=e.__qtouchpan;u!==void 0&&(u.event!==void 0&&u.end(),me(u,"main"),me(u,"temp"),L.is.firefox===!0&&ce(e,!1),u.styleCleanup!==void 0&&u.styleCleanup(),delete e.__qtouchpan)}}),I=[-61,9,38,199,426,686,756,818,1111,1181,1210,1635,2060,2097,2192,2262,2324,2394,2456,3178];function zt(e,u,l){return Object.prototype.toString.call(e)==="[object Date]"&&(l=e.getDate(),u=e.getMonth()+1,e=e.getFullYear()),Rt(Fe(e,u,l))}function Xt(e){return Kt(e)===0}function Qt(e,u){return u<=6?31:u<=11||Xt(e)?30:29}function Kt(e){const u=I.length;let l=I[0],a,t,n,d,i;if(e<l||e>=I[u-1])throw new Error("Invalid Jalaali year "+e);for(i=1;i<u&&(a=I[i],t=a-l,!(e<a));i+=1)l=a;return d=e-l,t-d<6&&(d=d-t+w(t+4,33)*33),n=x(x(d+1,33)-1,4),n===-1&&(n=4),n}function Ut(e,u){const l=I.length,a=e+621;let t=-14,n=I[0],d,i,s,f,c;if(e<n||e>=I[l-1])throw new Error("Invalid Jalaali year "+e);for(c=1;c<l&&(d=I[c],i=d-n,!(e<d));c+=1)t=t+w(i,33)*8+w(x(i,33),4),n=d;f=e-n,t=t+w(f,33)*8+w(x(f,33)+3,4),x(i,33)===4&&i-f===4&&(t+=1);const v=w(a,4)-w((w(a,100)+1)*3,4)-150,b=20+t-v;return i-f<6&&(f=f-i+w(i+4,33)*33),s=x(x(f+1,33)-1,4),s===-1&&(s=4),{leap:s,gy:a,march:b}}function Rt(e){const u=Jt(e).gy;let l=u-621,a,t,n;const d=Ut(l),i=Fe(u,3,d.march);if(n=e-i,n>=0){if(n<=185)return t=1+w(n,31),a=x(n,31)+1,{jy:l,jm:t,jd:a};n-=186}else l-=1,n+=179,d.leap===1&&(n+=1);return t=7+w(n,30),a=x(n,30)+1,{jy:l,jm:t,jd:a}}function Fe(e,u,l){let a=w((e+w(u-8,6)+100100)*1461,4)+w(153*x(u+9,12)+2,5)+l-34840408;return a=a-w(w(e+100100+w(u-8,6),100)*3,4)+752,a}function Jt(e){let u=4*e+139361631;u=u+w(w(4*e+183187720,146097)*3,4)*4-3908;const l=w(x(u,1461),4)*5+308,a=w(x(l,153),5)+1,t=x(w(l,153),12)+1;return{gy:w(u,1461)-100100+w(8-t,6),gm:t,gd:a}}function w(e,u){return~~(e/u)}function x(e,u){return e-~~(e/u)*u}function M(e,u=2,l="0"){if(e==null)return e;const a=""+e;return a.length>=u?a:new Array(u-a.length+1).join(l)+a}const Wt=["gregorian","persian"],Ee={mask:{type:String},locale:Object,calendar:{type:String,validator:e=>Wt.includes(e),default:"gregorian"},landscape:Boolean,color:String,textColor:String,square:Boolean,flat:Boolean,bordered:Boolean,readonly:Boolean,disable:Boolean},Gt=["update:modelValue"];function en(e){return e.year+"/"+M(e.month)+"/"+M(e.day)}function tn(e,u){const l=C(()=>e.disable!==!0&&e.readonly!==!0),a=C(()=>l.value===!0?0:-1),t=C(()=>{const i=[];return e.color!==void 0&&i.push(`bg-${e.color}`),e.textColor!==void 0&&i.push(`text-${e.textColor}`),i.join(" ")});function n(){return e.locale!==void 0?{...u.lang.date,...e.locale}:u.lang.date}function d(i){const s=new Date,f=i===!0?null:0;if(e.calendar==="persian"){const c=zt(s);return{year:c.jy,month:c.jm,day:c.jd}}return{year:s.getFullYear(),month:s.getMonth()+1,day:s.getDate(),hour:f,minute:f,second:f,millisecond:f}}return{editable:l,tabindex:a,headerClass:t,getLocale:n,getCurrentDate:d}}const Be=864e5,nn=36e5,ye=6e4,Ve="YYYY-MM-DDTHH:mm:ss.SSSZ",un=/\[((?:[^\]\\]|\\]|\\)*)\]|do|d{1,4}|Mo|M{1,4}|m{1,2}|wo|w{1,2}|Qo|Do|DDDo|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]/g,rn=/(\[[^\]]*\])|do|d{1,4}|Mo|M{1,4}|m{1,2}|wo|w{1,2}|Qo|Do|DDDo|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]|([.*+:?^,\s${}()|\\]+)/g,ve={};function an(e,u){const l="("+u.days.join("|")+")",a=e+l;if(ve[a]!==void 0)return ve[a];const t="("+u.daysShort.join("|")+")",n="("+u.months.join("|")+")",d="("+u.monthsShort.join("|")+")",i={};let s=0;const f=e.replace(rn,v=>{switch(s++,v){case"YY":return i.YY=s,"(-?\\d{1,2})";case"YYYY":return i.YYYY=s,"(-?\\d{1,4})";case"M":return i.M=s,"(\\d{1,2})";case"Mo":return i.M=s++,"(\\d{1,2}(st|nd|rd|th))";case"MM":return i.M=s,"(\\d{2})";case"MMM":return i.MMM=s,d;case"MMMM":return i.MMMM=s,n;case"D":return i.D=s,"(\\d{1,2})";case"Do":return i.D=s++,"(\\d{1,2}(st|nd|rd|th))";case"DD":return i.D=s,"(\\d{2})";case"H":return i.H=s,"(\\d{1,2})";case"HH":return i.H=s,"(\\d{2})";case"h":return i.h=s,"(\\d{1,2})";case"hh":return i.h=s,"(\\d{2})";case"m":return i.m=s,"(\\d{1,2})";case"mm":return i.m=s,"(\\d{2})";case"s":return i.s=s,"(\\d{1,2})";case"ss":return i.s=s,"(\\d{2})";case"S":return i.S=s,"(\\d{1})";case"SS":return i.S=s,"(\\d{2})";case"SSS":return i.S=s,"(\\d{3})";case"A":return i.A=s,"(AM|PM)";case"a":return i.a=s,"(am|pm)";case"aa":return i.aa=s,"(a\\.m\\.|p\\.m\\.)";case"ddd":return t;case"dddd":return l;case"Q":case"d":case"E":return"(\\d{1})";case"do":return s++,"(\\d{1}(st|nd|rd|th))";case"Qo":return"(1st|2nd|3rd|4th)";case"DDD":case"DDDD":return"(\\d{1,3})";case"DDDo":return s++,"(\\d{1,3}(st|nd|rd|th))";case"w":return"(\\d{1,2})";case"wo":return s++,"(\\d{1,2}(st|nd|rd|th))";case"ww":return"(\\d{2})";case"Z":return i.Z=s,"(Z|[+-]\\d{2}:\\d{2})";case"ZZ":return i.ZZ=s,"(Z|[+-]\\d{2}\\d{2})";case"X":return i.X=s,"(-?\\d+)";case"x":return i.x=s,"(-?\\d{4,})";default:return s--,v[0]==="["&&(v=v.substring(1,v.length-1)),v.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}}),c={map:i,regex:new RegExp("^"+f)};return ve[a]=c,c}function Ne(e,u){return e!==void 0?e:u!==void 0?u.date:mt.date}function Ie(e,u=""){const l=e>0?"-":"+",a=Math.abs(e),t=Math.floor(a/60),n=a%60;return l+M(t)+u+M(n)}function te(e,u,l,a,t){const n={year:null,month:null,day:null,hour:null,minute:null,second:null,millisecond:null,timezoneOffset:null,dateHash:null,timeHash:null};if(t!==void 0&&Object.assign(n,t),e==null||e===""||typeof e!="string")return n;u===void 0&&(u=Ve);const d=Ne(l,je.props),i=d.months,s=d.monthsShort,{regex:f,map:c}=an(u,d),v=e.match(f);if(v===null)return n;let b="";if(c.X!==void 0||c.x!==void 0){const D=parseInt(v[c.X!==void 0?c.X:c.x],10);if(isNaN(D)===!0||D<0)return n;const k=new Date(D*(c.X!==void 0?1e3:1));n.year=k.getFullYear(),n.month=k.getMonth()+1,n.day=k.getDate(),n.hour=k.getHours(),n.minute=k.getMinutes(),n.second=k.getSeconds(),n.millisecond=k.getMilliseconds()}else{if(c.YYYY!==void 0)n.year=parseInt(v[c.YYYY],10);else if(c.YY!==void 0){const D=parseInt(v[c.YY],10);n.year=D<0?D:2e3+D}if(c.M!==void 0){if(n.month=parseInt(v[c.M],10),n.month<1||n.month>12)return n}else c.MMM!==void 0?n.month=s.indexOf(v[c.MMM])+1:c.MMMM!==void 0&&(n.month=i.indexOf(v[c.MMMM])+1);if(c.D!==void 0){if(n.day=parseInt(v[c.D],10),n.year===null||n.month===null||n.day<1)return n;const D=a!=="persian"?new Date(n.year,n.month,0).getDate():Qt(n.year,n.month);if(n.day>D)return n}c.H!==void 0?n.hour=parseInt(v[c.H],10)%24:c.h!==void 0&&(n.hour=parseInt(v[c.h],10)%12,(c.A&&v[c.A]==="PM"||c.a&&v[c.a]==="pm"||c.aa&&v[c.aa]==="p.m.")&&(n.hour+=12),n.hour=n.hour%24),c.m!==void 0&&(n.minute=parseInt(v[c.m],10)%60),c.s!==void 0&&(n.second=parseInt(v[c.s],10)%60),c.S!==void 0&&(n.millisecond=parseInt(v[c.S],10)*10**(3-v[c.S].length)),(c.Z!==void 0||c.ZZ!==void 0)&&(b=c.Z!==void 0?v[c.Z].replace(":",""):v[c.ZZ],n.timezoneOffset=(b[0]==="+"?-1:1)*(60*b.slice(1,3)+1*b.slice(3,5)))}return n.dateHash=M(n.year,6)+"/"+M(n.month)+"/"+M(n.day),n.timeHash=M(n.hour)+":"+M(n.minute)+":"+M(n.second)+b,n}function ge(e){const u=new Date(e.getFullYear(),e.getMonth(),e.getDate());u.setDate(u.getDate()-(u.getDay()+6)%7+3);const l=new Date(u.getFullYear(),0,4);l.setDate(l.getDate()-(l.getDay()+6)%7+3);const a=u.getTimezoneOffset()-l.getTimezoneOffset();u.setHours(u.getHours()-a);const t=(u-l)/(Be*7);return 1+Math.floor(t)}function E(e,u,l){const a=new Date(e),t=`set${l===!0?"UTC":""}`;switch(u){case"year":case"years":a[`${t}Month`](0);case"month":case"months":a[`${t}Date`](1);case"day":case"days":case"date":a[`${t}Hours`](0);case"hour":case"hours":a[`${t}Minutes`](0);case"minute":case"minutes":a[`${t}Seconds`](0);case"second":case"seconds":a[`${t}Milliseconds`](0)}return a}function ne(e,u,l){return(e.getTime()-e.getTimezoneOffset()*ye-(u.getTime()-u.getTimezoneOffset()*ye))/l}function ln(e,u,l="days"){const a=new Date(e),t=new Date(u);switch(l){case"years":case"year":return a.getFullYear()-t.getFullYear();case"months":case"month":return(a.getFullYear()-t.getFullYear())*12+a.getMonth()-t.getMonth();case"days":case"day":case"date":return ne(E(a,"day"),E(t,"day"),Be);case"hours":case"hour":return ne(E(a,"hour"),E(t,"hour"),nn);case"minutes":case"minute":return ne(E(a,"minute"),E(t,"minute"),ye);case"seconds":case"second":return ne(E(a,"second"),E(t,"second"),1e3)}}function pe(e){return ln(e,E(e,"year"),"days")+1}function $(e){if(e>=11&&e<=13)return`${e}th`;switch(e%10){case 1:return`${e}st`;case 2:return`${e}nd`;case 3:return`${e}rd`}return`${e}th`}const Te={YY(e,u,l){const a=this.YYYY(e,u,l)%100;return a>=0?M(a):"-"+M(Math.abs(a))},YYYY(e,u,l){return l??e.getFullYear()},M(e){return e.getMonth()+1},Mo(e){return $(e.getMonth()+1)},MM(e){return M(e.getMonth()+1)},MMM(e,u){return u.monthsShort[e.getMonth()]},MMMM(e,u){return u.months[e.getMonth()]},Q(e){return Math.ceil((e.getMonth()+1)/3)},Qo(e){return $(this.Q(e))},D(e){return e.getDate()},Do(e){return $(e.getDate())},DD(e){return M(e.getDate())},DDD(e){return pe(e)},DDDo(e){return $(pe(e))},DDDD(e){return M(pe(e),3)},d(e){return e.getDay()},do(e){return $(e.getDay())},dd(e,u){return u.days[e.getDay()].slice(0,2)},ddd(e,u){return u.daysShort[e.getDay()]},dddd(e,u){return u.days[e.getDay()]},E(e){return e.getDay()||7},w(e){return ge(e)},wo(e){return $(ge(e))},ww(e){return M(ge(e))},H(e){return e.getHours()},HH(e){return M(e.getHours())},h(e){const u=e.getHours();return u===0?12:u>12?u%12:u},hh(e){return M(this.h(e))},m(e){return e.getMinutes()},mm(e){return M(e.getMinutes())},s(e){return e.getSeconds()},ss(e){return M(e.getSeconds())},S(e){return Math.floor(e.getMilliseconds()/100)},SS(e){return M(Math.floor(e.getMilliseconds()/10))},SSS(e){return M(e.getMilliseconds(),3)},A(e){return e.getHours()<12?"AM":"PM"},a(e){return e.getHours()<12?"am":"pm"},aa(e){return e.getHours()<12?"a.m.":"p.m."},Z(e,u,l,a){const t=a??e.getTimezoneOffset();return Ie(t,":")},ZZ(e,u,l,a){const t=a??e.getTimezoneOffset();return Ie(t)},X(e){return Math.floor(e.getTime()/1e3)},x(e){return e.getTime()}};function on(e,u,l,a,t){if(e!==0&&!e||e===1/0||e===-1/0)return;const n=new Date(e);if(isNaN(n))return;u===void 0&&(u=Ve);const d=Ne(l,je.props);return u.replace(un,(i,s)=>i in Te?Te[i](n,d,a,t):s===void 0?i:s.split("\\]").join("]"))}function sn(e,u){return e.hour!==null&&e.minute===null?"minute":"hour"}function dn(){const e=new Date;return{hour:e.getHours(),minute:e.getMinutes(),second:e.getSeconds(),millisecond:e.getMilliseconds()}}const cn=ht({name:"QTime",props:{...It,...Tt,...Ee,modelValue:{required:!0,validator:e=>typeof e=="string"||e===null},mask:{...Ee.mask,default:null},format24h:{type:Boolean,default:null},defaultDate:{type:String,validator:e=>/^-?[\d]+\/[0-1]\d\/[0-3]\d$/.test(e)},options:Function,hourOptions:Array,minuteOptions:Array,secondOptions:Array,withSeconds:Boolean,nowBtn:Boolean},emits:Gt,setup(e,{slots:u,emit:l}){const a=yt(),{$q:t}=a.proxy,n=jt(e,t),{tabindex:d,headerClass:i,getLocale:s,getCurrentDate:f}=tn(e,t),c=$t(e),v=Ft(c);let b,D;const k=P(null),T=C(()=>Qe()),Z=C(()=>s()),we=C(()=>Ke()),z=te(e.modelValue,T.value,Z.value,e.calendar,we.value),y=P(sn(z)),m=P(z),Y=P(z.hour===null||z.hour<12),Le=C(()=>`q-time q-time--${e.landscape===!0?"landscape":"portrait"}`+(n.value===!0?" q-time--dark q-dark":"")+(e.disable===!0?" disabled":e.readonly===!0?" q-time--readonly":"")+(e.bordered===!0?" q-time--bordered":"")+(e.square===!0?" q-time--square no-border-radius":"")+(e.flat===!0?" q-time--flat no-shadow":"")),re=C(()=>{const r=m.value;return{hour:r.hour===null?"--":H.value===!0?M(r.hour):String(Y.value===!0?r.hour===0?12:r.hour:r.hour>12?r.hour-12:r.hour),minute:r.minute===null?"--":M(r.minute),second:r.second===null?"--":M(r.second)}}),H=C(()=>e.format24h!==null?e.format24h:t.lang.date.format24h),Pe=C(()=>{const r=y.value==="hour",o=r===!0?12:60,h=m.value[y.value];let S=`rotate(${Math.round(h*(360/o))-180}deg) translateX(-50%)`;return r===!0&&H.value===!0&&m.value.hour>=12&&(S+=" scale(.7)"),{transform:S}}),_e=C(()=>m.value.hour!==null),Ze=C(()=>_e.value===!0&&m.value.minute!==null),F=C(()=>e.hourOptions!==void 0?r=>e.hourOptions.includes(r):e.options!==void 0?r=>e.options(r,null,null):null),X=C(()=>e.minuteOptions!==void 0?r=>e.minuteOptions.includes(r):e.options!==void 0?r=>e.options(m.value.hour,r,null):null),Q=C(()=>e.secondOptions!==void 0?r=>e.secondOptions.includes(r):e.options!==void 0?r=>e.options(m.value.hour,m.value.minute,r):null),A=C(()=>{if(F.value===null)return null;const r=U(0,11,F.value),o=U(12,11,F.value);return{am:r,pm:o,values:r.values.concat(o.values)}}),B=C(()=>X.value!==null?U(0,59,X.value):null),V=C(()=>Q.value!==null?U(0,59,Q.value):null),K=C(()=>{switch(y.value){case"hour":return A.value;case"minute":return B.value;case"second":return V.value}}),ze=C(()=>{let r,o,h=0,p=1;const S=K.value!==null?K.value.values:void 0;y.value==="hour"?H.value===!0?(r=0,o=23):(r=0,o=11,Y.value===!1&&(h=12)):(r=0,o=55,p=5);const O=[];for(let g=r,q=r;g<=o;g+=p,q++){const j=g+h,lt=S!==void 0&&S.includes(j)===!1,ot=y.value==="hour"&&g===0?H.value===!0?"00":"12":g;O.push({val:j,index:q,disable:lt,label:ot})}return O}),Xe=C(()=>[[Zt,Ue,void 0,{stop:!0,prevent:!0,mouse:!0}]]);xe(()=>e.modelValue,r=>{const o=te(r,T.value,Z.value,e.calendar,we.value);(o.dateHash!==m.value.dateHash||o.timeHash!==m.value.timeHash)&&(m.value=o,o.hour===null?y.value="hour":Y.value=o.hour<12)}),xe([T,Z],()=>{wt(()=>{de()})});function Ce(){const r={...f(),...dn()};de(r),Object.assign(m.value,r),y.value="hour"}function U(r,o,h){const p=Array.apply(null,{length:o+1}).map((S,O)=>{const g=O+r;return{index:g,val:h(g)===!0}}).filter(S=>S.val===!0).map(S=>S.index);return{min:p[0],max:p[p.length-1],values:p,threshold:o+1}}function Se(r,o,h){const p=Math.abs(r-o);return Math.min(p,h-p)}function ae(r,{min:o,max:h,values:p,threshold:S}){if(r===o)return o;if(r<o||r>h)return Se(r,o,S)<=Se(r,h,S)?o:h;const O=p.findIndex(j=>r<=j),g=p[O-1],q=p[O];return r-g<=q-r?g:q}function Qe(){return e.calendar!=="persian"&&e.mask!==null?e.mask:`HH:mm${e.withSeconds===!0?":ss":""}`}function Ke(){if(typeof e.defaultDate!="string"){const r=f(!0);return r.dateHash=en(r),r}return te(e.defaultDate,"YYYY/MM/DD",void 0,e.calendar)}function le(){return Et(a)===!0||K.value!==null&&(K.value.values.length===0||y.value==="hour"&&H.value!==!0&&A.value[Y.value===!0?"am":"pm"].values.length===0)}function oe(){const r=k.value,{top:o,left:h,width:p}=r.getBoundingClientRect(),S=p/2;return{top:o+S,left:h+S,dist:S*.7}}function Ue(r){if(le()!==!0){if(r.isFirst===!0){b=oe(),D=R(r.evt,b);return}D=R(r.evt,b,D),r.isFinal===!0&&(b=!1,D=null,be())}}function be(){y.value==="hour"?y.value="minute":e.withSeconds&&y.value==="minute"&&(y.value="second")}function R(r,o,h){const p=ue(r),S=Math.abs(p.top-o.top),O=Math.sqrt(Math.pow(Math.abs(p.top-o.top),2)+Math.pow(Math.abs(p.left-o.left),2));let g,q=Math.asin(S/O)*(180/Math.PI);if(p.top<o.top?q=o.left<p.left?90-q:270+q:q=o.left<p.left?q+90:270-q,y.value==="hour"){if(g=q/30,A.value!==null){const j=H.value!==!0?Y.value===!0:A.value.am.values.length!==0&&A.value.pm.values.length!==0?O>=o.dist:A.value.am.values.length!==0;g=ae(g+(j===!0?0:12),A.value[j===!0?"am":"pm"])}else g=Math.round(g),H.value===!0?O<o.dist?g<12&&(g+=12):g===12&&(g=0):Y.value===!0&&g===12?g=0:Y.value===!1&&g!==12&&(g+=12);H.value===!0&&(Y.value=g<12)}else g=Math.round(q/6)%60,y.value==="minute"&&B.value!==null?g=ae(g,B.value):y.value==="second"&&V.value!==null&&(g=ae(g,V.value));return h!==g&&ut[y.value](g),g}const ie={hour(){y.value="hour"},minute(){y.value="minute"},second(){y.value="second"}};function Re(r){r.keyCode===13&&ke()}function Je(r){r.keyCode===13&&Ye()}function We(r){le()!==!0&&(t.platform.is.desktop!==!0&&R(r,oe()),be())}function Ge(r){le()!==!0&&R(r,oe())}function et(r){if(r.keyCode===13)y.value="hour";else if([37,39].includes(r.keyCode)){const o=r.keyCode===37?-1:1;if(A.value!==null){const h=H.value===!0?A.value.values:A.value[Y.value===!0?"am":"pm"].values;if(h.length===0)return;if(m.value.hour===null)J(h[0]);else{const p=(h.length+h.indexOf(m.value.hour)+o)%h.length;J(h[p])}}else{const h=H.value===!0?24:12,p=H.value!==!0&&Y.value===!1?12:0,S=m.value.hour===null?-o:m.value.hour;J(p+(24+S+o)%h)}}}function tt(r){if(r.keyCode===13)y.value="minute";else if([37,39].includes(r.keyCode)){const o=r.keyCode===37?-1:1;if(B.value!==null){const h=B.value.values;if(h.length===0)return;if(m.value.minute===null)W(h[0]);else{const p=(h.length+h.indexOf(m.value.minute)+o)%h.length;W(h[p])}}else{const h=m.value.minute===null?-o:m.value.minute;W((60+h+o)%60)}}}function nt(r){if(r.keyCode===13)y.value="second";else if([37,39].includes(r.keyCode)){const o=r.keyCode===37?-1:1;if(V.value!==null){const h=V.value.values;if(h.length===0)return;if(m.value.seconds===null)G(h[0]);else{const p=(h.length+h.indexOf(m.value.second)+o)%h.length;G(h[p])}}else{const h=m.value.second===null?-o:m.value.second;G((60+h+o)%60)}}}function J(r){m.value.hour!==r&&(m.value.hour=r,N())}function W(r){m.value.minute!==r&&(m.value.minute=r,N())}function G(r){m.value.second!==r&&(m.value.second=r,N())}const ut={hour:J,minute:W,second:G};function ke(){Y.value===!1&&(Y.value=!0,m.value.hour!==null&&(m.value.hour-=12,N()))}function Ye(){Y.value===!0&&(Y.value=!1,m.value.hour!==null&&(m.value.hour+=12,N()))}function se(r){const o=e.modelValue;y.value!==r&&o!==void 0&&o!==null&&o!==""&&typeof o!="string"&&(y.value=r)}function N(){if(F.value!==null&&F.value(m.value.hour)!==!0){m.value=te(),se("hour");return}if(X.value!==null&&X.value(m.value.minute)!==!0){m.value.minute=null,m.value.second=null,se("minute");return}if(e.withSeconds===!0&&Q.value!==null&&Q.value(m.value.second)!==!0){m.value.second=null,se("second");return}m.value.hour===null||m.value.minute===null||e.withSeconds===!0&&m.value.second===null||de()}function de(r){const o=Object.assign({...m.value},r),h=e.calendar==="persian"?M(o.hour)+":"+M(o.minute)+(e.withSeconds===!0?":"+M(o.second):""):on(new Date(o.year,o.month===null?null:o.month-1,o.day,o.hour,o.minute,o.second,o.millisecond),T.value,Z.value,o.year,o.timezoneOffset);o.changed=h!==e.modelValue,l("update:modelValue",h,o)}function rt(){const r=[_("div",{class:"q-time__link "+(y.value==="hour"?"q-time__link--active":"cursor-pointer"),tabindex:d.value,onClick:ie.hour,onKeyup:et},re.value.hour),_("div",":"),_("div",_e.value===!0?{class:"q-time__link "+(y.value==="minute"?"q-time__link--active":"cursor-pointer"),tabindex:d.value,onKeyup:tt,onClick:ie.minute}:{class:"q-time__link"},re.value.minute)];e.withSeconds===!0&&r.push(_("div",":"),_("div",Ze.value===!0?{class:"q-time__link "+(y.value==="second"?"q-time__link--active":"cursor-pointer"),tabindex:d.value,onKeyup:nt,onClick:ie.second}:{class:"q-time__link"},re.value.second));const o=[_("div",{class:"q-time__header-label row items-center no-wrap",dir:"ltr"},r)];return H.value===!1&&o.push(_("div",{class:"q-time__header-ampm column items-between no-wrap"},[_("div",{class:"q-time__link "+(Y.value===!0?"q-time__link--active":"cursor-pointer"),tabindex:d.value,onClick:ke,onKeyup:Re},"AM"),_("div",{class:"q-time__link "+(Y.value!==!0?"q-time__link--active":"cursor-pointer"),tabindex:d.value,onClick:Ye,onKeyup:Je},"PM")])),_("div",{class:"q-time__header flex flex-center no-wrap "+i.value},o)}function at(){const r=m.value[y.value];return _("div",{class:"q-time__content col relative-position"},[_(Mt,{name:"q-transition--scale"},()=>_("div",{key:"clock"+y.value,class:"q-time__container-parent absolute-full"},[_("div",{ref:k,class:"q-time__container-child fit overflow-hidden"},[Dt(_("div",{class:"q-time__clock cursor-pointer non-selectable",onClick:We,onMousedown:Ge},[_("div",{class:"q-time__clock-circle fit"},[_("div",{class:"q-time__clock-pointer"+(m.value[y.value]===null?" hidden":e.color!==void 0?` text-${e.color}`:""),style:Pe.value}),ze.value.map(o=>_("div",{class:`q-time__clock-position row flex-center q-time__clock-pos-${o.index}`+(o.val===r?" q-time__clock-position--active "+i.value:o.disable===!0?" q-time__clock-position--disable":"")},[_("span",o.label)]))])]),Xe.value)])])),e.nowBtn===!0?_($e,{class:"q-time__now-button absolute",icon:t.iconSet.datetime.now,unelevated:!0,size:"sm",round:!0,color:e.color,textColor:e.textColor,tabindex:d.value,onClick:Ce}):null])}return a.proxy.setNow=Ce,()=>{const r=[at()],o=vt(u.default);return o!==void 0&&r.push(_("div",{class:"q-time__actions"},o)),e.name!==void 0&&e.disable!==!0&&v(r,"push"),_("div",{class:Le.value,tabindex:-1},[rt(),_("div",{class:"q-time__main col overflow-auto"},r)])}}}),fn=_t({__name:"main",setup(e){Ct({title:"Countdown Control"});const u=P(""),l=C(()=>{var n,d;const t=Math.round((((d=(n=qt)==null?void 0:n.data)==null?void 0:d.remaining)??0)/1e3);return Bt(t*1e3)});function a(){nodecg.sendMessage("countdownStart",u.value),u.value=""}return(t,n)=>(xt(),St("div",null,[bt("div",null,"Current Countdown: "+kt(l.value),1),He(cn,{class:"full-width",modelValue:u.value,"onUpdate:modelValue":n[0]||(n[0]=d=>u.value=d),format24h:"",flat:"",square:""},null,8,["modelValue"]),He($e,{class:"full-width",onClick:a,color:"primary",unelevated:"",square:""},{default:Yt(()=>n[1]||(n[1]=[Ht("Apply")])),_:1})]))}}),De=Ot(fn),mn=At();De.use(gt);De.use(mn);De.mount("#app");pt.set(!0);
